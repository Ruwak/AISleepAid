{% extends "base.html" %}

{% block title %}Magic Predictor{% endblock %}

{% block content %}
<div class="magic-page">

    <h1 class="magic-title">Magic Sleep Predictor</h1>
    <p class="magic-subtitle">
        Predict how effective your sleep will be before you go to bed
    </p>

    <div class="magic-card">
        <form method="POST">

            <div class="magic-group">
                <label>Sleep Length</label>
                <select name="SleepLength">
                    {% for SleepLength in sleep_lengths %}
                        <option value="{{ SleepLength }}">{{ SleepLength }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="magic-group">
                <label>Caffeination Level</label>
                <select name="CaffeineConsumed">
                    {% for CaffeineConsumed in caffeine_intakes %}
                        <option value="{{ CaffeineConsumed }}">{{ CaffeineConsumed }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="magic-group">
                <label>Alcohol Consumed</label>
                <select name="AlcoholConsumed">
                    {% for AlcoholConsumed in is_alcoholconsumeded %}
                        <option value="{{ AlcoholConsumed }}">{{ AlcoholConsumed }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="magic-group">
                <label>Awakenings</label>
                <select name="Awakenings">
                    {% for Awakenings in awakeningss %}
                        <option value="{{ Awakenings }}">{{ Awakenings }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="magic-group">
                <label>Sleep Time</label>
                <select name="SleepTime">
                    {% for sleepTime in sleep_times %}
                        <option value="{{ sleepTime }}">{{ sleepTime }}</option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit" class="magic-btn">
                Predict Effectiveness
            </button>

        </form>
    </div>

    {% if prediction %}
    <div class="prediction-card">
        <h2>Prediction Result</h2>

        <div class="prediction-grid">
            <p><span>Sleep Time</span><strong>{{ choices.SleepTime }}</strong></p>
            <p><span>Sleep Length</span><strong>{{ choices.SleepLength }}</strong></p>
            <p><span>Awakenings</span><strong>{{ choices.Awakenings }}</strong></p>
            <p><span>Alcohol</span><strong>{{ choices.AlcoholConsumed }}</strong></p>
            <p><span>Caffeine</span><strong>{{ choices.CaffeineConsumed }}</strong></p>
        </div>

        <div class="prediction-score">
            {{ (prediction.probability * 100) | round(2) }}%
            <span>Likely to be effective</span>
        </div>
    </div>
    {% endif %}

</div>
{% endblock %}
