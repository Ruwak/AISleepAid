{% extends "base.html" %}

{% block title %}Sleep Recommendations{% endblock %}

{% block content %}
<div class="recs-page">

    <h1 class="recs-title">Your Sleep Recommendations</h1>
    <p class="recs-subtitle">Based on your sleep data & behavior patterns</p>

    {% if recs_dt %}
    <div class="recs-grid">
        {% for rec in recs_dt %}
        <div class="rec-card">
            <h3>Recommended Sleep Plan</h3>

            <div class="rec-item">
                <span>Sleep Time</span>
                <strong>{{ rec.SleepTime }}</strong>
            </div>

            <div class="rec-item">
                <span>Sleep Length</span>
                <strong>{{ rec.SleepLength }}</strong>
            </div>

            <div class="rec-item">
                <span>Awakenings</span>
                <strong>{{ rec.Awakenings }}</strong>
            </div>

            <div class="rec-item">
                <span>Alcohol</span>
                <strong>{{ rec.AlcoholConsumed }}</strong>
            </div>

            <div class="rec-item">
                <span>Caffeine</span>
                <strong>{{ rec.CaffeineConsumed }}</strong>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <p class="no-recs">No recommendations yet. Try submitting sleep data.</p>
    {% endif %}

    {% if feature_importances_dt %}
    <div class="importance-box">
        <h2>What Affected Your Sleep Most</h2>
        <table>
            <thead>
                <tr>
                    <th>Factor</th>
                    <th>Impact</th>
                </tr>
            </thead>
            <tbody>
                {% for feature, importance in feature_importances_dt.items() %}
                <tr>
                    <td>{{ feature }}</td>
                    <td>{{ (importance * 100)|round(2) }}%</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

</div>
{% endblock %}
